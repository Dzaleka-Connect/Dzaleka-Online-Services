---
import MainLayout from '../layouts/MainLayout.astro';

const zones = [
  { name: 'Lisungwi', icon: 'üèòÔ∏è' },
  { name: 'Kawale 1 & 2', icon: 'üè°' },
  { name: 'Likuni 1 & 2', icon: 'üè¢' },
  { name: 'Zomba', icon: 'üè™' },
  { name: 'Blantyre', icon: 'üè¨' },
  { name: 'Katubza', icon: 'üèòÔ∏è' }
];

const activities = [
  {
    title: 'Tumaini Festival',
    description: 'Annual cultural festival showcasing music, art, and performances',
    icon: 'üé≠',
    image: 'https://tumainiletu.org/wp-content/uploads/2024/10/Badre_Bahaji_Tumaini_festival21_-31-1.jpg'
  },
  {
    title: 'Community Initiatives',
    description: 'Engage with various community-driven projects',
    icon: 'ü§ù',
    image: 'https://tumainiletu.org/wp-content/uploads/2021/07/Website-Entrepreneurship-and-innovation-2048x1536.jpg'
  },
  {
    title: 'Educational Workshops',
    description: 'Participate in programs focusing on entrepreneurship and skills development',
    icon: 'üìö',
    image: 'https://tumainiletu.org/wp-content/uploads/2021/07/Website-Creative-skills-development-1-1-2048x1365.jpg'
  }
];

const stats = [
  { number: '50km', label: 'From Lilongwe' },
  { number: '60,000+', label: 'Residents' },
  { number: '1994', label: 'Established' },
  { number: '5+', label: 'Nations' }
];
---

<MainLayout title="Visit Dzaleka">
  <script>
    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('visitForm');
      if (form) {
        form.addEventListener('submit', async (event) => {
          event.preventDefault();
          const formData = new FormData(form);
          
          try {
            const response = await fetch(form.action, {
              method: 'POST',
              body: formData,
              headers: {
                'Accept': 'application/json'
              }
            });
            
            if (response.ok) {
              window.location.href = '/thank-you?type=visit';
            }
          } catch (error) {
            console.error('Error:', error);
          }
        });
      }
    });
  </script>

  <main class="min-h-screen bg-gray-50">
    <!-- Hero Section -->
    <div class="relative h-[80vh] overflow-hidden">
      <!-- Background Image with Overlay -->
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-gradient-to-br from-primary-900/90 via-primary-800/90 to-primary-900/90"></div>
        <img 
          src="https://tumainiletu.org/wp-content/uploads/2024/10/Badre_Bahaji_Tumaini_festival21_-31-1.jpg" 
          alt="Dzaleka Community" 
          class="w-full h-full object-cover"
        />
      </div>

      <!-- Content -->
      <div class="relative z-20 h-full flex flex-col items-center justify-center py-8 md:py-16">
        <div class="container mx-auto px-4 md:px-6">
          <div class="max-w-4xl mx-auto text-center space-y-8">
            <div class="inline-flex items-center space-x-2 bg-white/10 backdrop-blur-md rounded-full px-4 md:px-6 py-2">
              <span class="w-2 h-2 rounded-full bg-primary-400 animate-pulse"></span>
              <span class="text-xs md:text-sm text-white/90 font-medium tracking-wider uppercase">Experience Dzaleka</span>
            </div>
            
            <div class="space-y-6">
              <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold text-white leading-tight">
                Visit <span class="text-primary-400">Dzaleka</span><br/>Refugee Camp
              </h1>
              
              <p class="text-lg md:text-xl text-white/90 max-w-2xl mx-auto leading-relaxed">
                Discover the vibrant culture, resilient spirit, and inspiring stories of Malawi's largest refugee community
              </p>
            </div>

            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 md:gap-6 pt-8">
              <button 
                onclick="document.getElementById('planTripForm').scrollIntoView({behavior: 'smooth'})"
                class="w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 bg-white hover:bg-primary-400 text-primary-900 hover:text-white font-medium rounded-full transition-all duration-300 group shadow-lg hover:shadow-xl text-base"
              >
                <span>Plan Your Visit</span>
                <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
              </button>
              
              <a 
                href="#activities"
                class="w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 border-2 border-white/30 hover:border-white/80 text-white font-medium rounded-full transition-all duration-300 group hover:bg-white/10 text-base"
              >
                <span>Explore Activities</span>
                <svg class="w-5 h-5 ml-2 group-hover:translate-y-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Scroll Indicator -->
      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center animate-bounce">
        <div class="w-1 h-16 bg-gradient-to-b from-white/0 via-white/30 to-white/0"></div>
      </div>
    </div>

    <!-- Stats Section -->
    <section class="relative z-10 -mt-20">
      <div class="container mx-auto px-4">
        <div class="max-w-6xl mx-auto">
          <div class="bg-white rounded-2xl shadow-xl p-8 backdrop-blur-lg">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
              {stats.map(stat => (
                <div class="p-4 rounded-xl hover:bg-gray-50 transition-colors">
                  <div class="text-4xl font-bold text-primary-600 mb-2">{stat.number}</div>
                  <div class="text-gray-600 font-medium">{stat.label}</div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Activities -->
    <section id="activities" class="py-24">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">Featured Activities</h2>
          <p class="text-gray-600 max-w-2xl mx-auto">Immerse yourself in the rich cultural experiences and community initiatives that make Dzaleka unique</p>
        </div>

        <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
          {activities.map(activity => (
            <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all">
              <div class="aspect-w-16 aspect-h-9">
                <img 
                  src={activity.image} 
                  alt={activity.title}
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                />
              </div>
              <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent">
                <div class="absolute bottom-0 left-0 right-0 p-6">
                  <div class="flex items-center space-x-2 text-white/90 mb-2">
                    <span class="text-2xl">{activity.icon}</span>
                    <h3 class="text-xl font-semibold">{activity.title}</h3>
                  </div>
                  <p class="text-white/80">{activity.description}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Introduction -->
    <section class="py-24 bg-white">
      <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto">
          <div class="prose prose-lg">
            <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">About Dzaleka</h2>
            <p class="text-xl text-gray-700 leading-relaxed">
              Dzaleka Refugee Camp, located approximately 50 km from Lilongwe in Malawi's Dowa District, is the country's sole permanent refugee camp. Established in 1994 by the United Nations High Commissioner for Refugees (UNHCR), it now hosts over 52,000 refugees from nations including the Democratic Republic of Congo, Rwanda, Burundi, Ethiopia, and Somalia.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Zones Section -->
    <section class="py-24 bg-gray-50">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">Camp Zones</h2>
          <p class="text-gray-600 max-w-2xl mx-auto">Explore the different areas within Dzaleka</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 max-w-6xl mx-auto">
          {zones.map(zone => (
            <div class="bg-white rounded-xl p-6 text-center hover:shadow-lg transition-all">
              <span class="text-4xl mb-4 block">{zone.icon}</span>
              <h3 class="font-medium text-gray-900">{zone.name}</h3>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Plan Your Trip Form -->
    <section id="planTripForm" class="py-24 bg-white">
      <div class="container mx-auto px-4">
        <div class="max-w-2xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-4">Plan Your Visit</h2>
            <p class="text-gray-600">Let us help you organize your visit to Dzaleka. Our team will get back to you within 24 hours.</p>
          </div>

          <div class="bg-white rounded-2xl shadow-xl p-8">
            <form 
              id="visitForm"
              action="https://formspree.io/f/xqaaajae" 
              method="POST" 
              class="space-y-6"
            >
              <input type="hidden" name="_next" value="/thank-you?type=visit">
              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2" for="name">Full Name</label>
                  <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all" 
                    required
                  >
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2" for="email">Email</label>
                  <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all" 
                    required
                  >
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2" for="visitDate">Preferred Visit Date</label>
                  <input 
                    type="date" 
                    id="visitDate" 
                    name="visitDate" 
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all" 
                    required
                  >
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2" for="groupSize">Group Size</label>
                  <select 
                    id="groupSize" 
                    name="groupSize" 
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all" 
                    required
                  >
                    <option value="">Select size</option>
                    <option value="1">1 person</option>
                    <option value="2-5">2-5 people</option>
                    <option value="6-10">6-10 people</option>
                    <option value="10+">10+ people</option>
                  </select>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-3">Areas of Interest</label>
                <div class="grid sm:grid-cols-2 gap-3">
                  {['Cultural Activities', 'Educational Programs', 'Community Projects', 'Homestay Program'].map(interest => (
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer">
                      <input 
                        type="checkbox" 
                        name="interests" 
                        value={interest.toLowerCase().replace(' ', '-')} 
                        class="w-5 h-5 rounded text-primary-600 focus:ring-primary-500"
                      >
                      <span class="ml-3 text-gray-700">{interest}</span>
                    </label>
                  ))}
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2" for="message">Additional Information</label>
                <textarea 
                  id="message" 
                  name="message" 
                  rows="4" 
                  class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all"
                ></textarea>
              </div>

              <button 
                type="submit" 
                class="w-full inline-flex items-center justify-center px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-all group"
              >
                <span>Submit Request</span>
                <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Video Section -->
    <section class="py-24 bg-gray-50">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-4">Experience Dzaleka</h2>
            <p class="text-gray-600 max-w-2xl mx-auto mb-8">Take a virtual tour of our vibrant community and get a glimpse of daily life in Dzaleka.</p>
          </div>

          <div class="relative rounded-2xl overflow-hidden shadow-2xl">
            <div class="relative w-full pb-[56.25%] bg-gray-900">
              <iframe 
                class="absolute top-0 left-0 w-full h-full"
                src="https://www.youtube.com/embed/T4oSsqeraHE?si=yqwOEDIc52S1kCG-" 
                title="Experience Dzaleka Refugee Camp"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen
                loading="lazy"
              ></iframe>
            </div>
          </div>

          <div class="mt-6 text-center">
            <p class="text-sm text-gray-500">Video courtesy of Perfect Afrika</p>
          </div>
        </div>
      </div>
    </section>

  </main>
</MainLayout>